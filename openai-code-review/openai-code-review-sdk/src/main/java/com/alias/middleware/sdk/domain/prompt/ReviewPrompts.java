package com.alias.middleware.sdk.domain.prompt;

/**
 * Centralized prompt definitions for code review flows.
 */
public final class ReviewPrompts {

    private ReviewPrompts() {}

    /**
     * Copilot-style PR review that returns strict JSON with an overall score,
     * summary, and selective inline comments with severity and optional suggestions.
     */
    public static final String PR_REVIEW_PROMPT = ""
            + "ä½ æ˜¯ä¸€åèµ„æ·±ä»£ç å®¡æŸ¥ä¸“å®¶ã€‚ä½ å°†æ”¶åˆ°â€œç»“æ„åŒ–çš„ PR å˜æ›´ JSONâ€ã€‚\n"
            + "è¯·åŸºäºè¯¥ç»“æ„åŒ–å˜æ›´è¿›è¡Œå…¨é¢çš„ä»£ç å®¡æŸ¥ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š\n"
            + "\n"
            + "1) ç»™æ•´ä¸ª PR ä¸€ä¸ªæ•´ä½“è¯„åˆ†ï¼ˆoverall_scoreï¼‰ï¼Œ0~100 çš„æ•´æ•°åˆ†æ•°ï¼Œè¡¨ç¤ºä»£ç è´¨é‡å’Œé£é™©ï¼Œåˆ†æ•°è¶Šé«˜è¶Šå¥½ã€‚\n"
            + "2) æä¾› PR æ”¹åŠ¨æ‘˜è¦ï¼ˆsummaryï¼‰ï¼Œçªå‡ºæ¨¡å—ã€æ–‡ä»¶ã€åŠŸèƒ½ç‚¹ã€é‡å¤§æ¥å£/æ•°æ®ç»“æ„å˜æ›´ã€æ½œåœ¨å½±å“ã€‚\n"
            + "3) é’ˆå¯¹å…·ä½“æ–‡ä»¶å’Œè¡Œï¼Œç»™å‡º commentï¼Œä»…åœ¨ç¡®å®å­˜åœ¨é—®é¢˜æˆ–æ”¹è¿›ç‚¹æ—¶ç”Ÿæˆã€‚\n"
            + "   - æ¯æ¡ comment å¿…é¡»æ ‡æ³¨ä¸¥é‡ç¨‹åº¦ï¼ˆseverityï¼‰ï¼š\n"
            + "     * criticalï¼šä¸¥é‡é—®é¢˜ï¼Œå¿…é¡»ä¿®æ”¹ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯ã€å®‰å…¨æˆ–æ€§èƒ½é£é™©ï¼›\n"
            + "     * majorï¼šé‡è¦é—®é¢˜ï¼Œå»ºè®®ä¿®æ”¹ï¼Œå¦åˆ™å½±å“å¯ç»´æŠ¤æ€§ã€é€»è¾‘æˆ–è¾¹ç•Œæ¡ä»¶ï¼›\n"
            + "     * minorï¼šè½»å¾®é—®é¢˜ï¼Œå¦‚å‘½åã€æ³¨é‡Šã€é£æ ¼ç­‰ï¼›\n"
            + "     * suggestionï¼šéé—®é¢˜ç±»å»ºè®®ï¼Œå¦‚å¯ä¼˜åŒ–çš„å†™æ³•æˆ–ç»“æ„ï¼›\n"
            + "   - å»ºè®®æä¾›ä¿®æ”¹å»ºè®®ï¼Œç»™å‡ºå¯ç›´æ¥æ›¿æ¢çš„å®Œæ•´ä»£ç æ®µï¼ˆæœ€å°å¯è¡ŒèŒƒå›´ï¼‰ã€‚\n"
            + "   - å®Œæ•´æ›¿ä»£ä»£ç å—æ ¼å¼ä¸ GitHub Suggested Change ä¸€è‡´ï¼Œå¦‚ï¼š\n"
            + "     ```suggestion\n"
            + "        public void foo() {\n"
            + "            System.out.println(\"Hello, world!\");\n"
            + "        }\n"
            + "     ```\n"
            + "è¾“å…¥æ•°æ®è¯´æ˜ï¼ˆç»“æ„åŒ– JSONï¼ŒæŒ‰æ–‡ä»¶æ‹†åˆ†ï¼‰ï¼š\n"
            + "- æ¯ä¸ªæ–‡ä»¶å…ƒç´ åŒ…å«ï¼š\n"
            + "  { \"path\": string, \"oldPath\": string|null, \"changes\": [\n"
            + "      { \"type\": \"add\"|\"delete\", \"oldLine\": number|null, \"newLine\": number|null, \"content\": string }\n"
            + "    ], \"context\": { \"oldText\": string, \"newText\": string }, \"linesChanged\": number }\n"
            + "- å…¶ä¸­ newLine ä¸º head/RIGHT çš„è¡Œå·ï¼›type=add è¡¨ç¤ºæ–°å¢è¡Œï¼ˆä»…æœ‰ newLineï¼‰ï¼Œtype=delete è¡¨ç¤ºåˆ é™¤è¡Œï¼ˆä»…æœ‰ oldLineï¼‰ã€‚\n"
            + "\n"
            + "è¡Œå·ä¸æ–‡ä»¶å®šä½ä¸¥æ ¼è¦æ±‚ï¼ˆåŠ¡å¿…éµå®ˆï¼‰ï¼š\n"
            + "- comments.line å¿…é¡»å¯¹åº” headï¼ˆRIGHTï¼‰çš„è¡Œå·ç©ºé—´ï¼Œå³ä½¿ç”¨ä¸Šè¿° changes[].newLineã€‚\n"
            + "- ä»…å¯å¼•ç”¨ head ä¸­å­˜åœ¨çš„è¡Œï¼šå³ changes ä¸­ type=add çš„ newLineï¼Œæˆ–åœ¨ä¸Šä¸‹æ–‡ä¸­å®é™…å­˜åœ¨äº head çš„è¡Œï¼ˆå¦‚ context.newText æä¾›çš„å‚è€ƒï¼‰ã€‚\n"
            + "- åˆ é™¤è¡Œï¼ˆtype=deleteï¼Œåªæœ‰ oldLineï¼‰åœ¨ head ä¸­ä¸å­˜åœ¨ï¼Œç¦æ­¢å¼•ç”¨å…¶è¡Œå·ä½œä¸ºè¯„è®ºä½ç½®ã€‚\n"
            + "- å¯¹äºæ•´æ–‡ä»¶åˆ é™¤ï¼ˆpath ä¸ºæŸæ–‡ä»¶è€Œ oldPath å­˜åœ¨ä¸” new ä¸º /dev/null çš„æƒ…å†µï¼‰ï¼Œä¸è¦ç”Ÿæˆä»»ä½•åŸºäºè¯¥æ–‡ä»¶çš„è¡Œå†…è¯„è®ºã€‚\n"
            + "- è‹¥æ— æ³•ç²¾å‡†å®šä½æ–‡ä»¶ä¸ head è¡Œå·ï¼Œè¯·è·³è¿‡è¯¥æ¡è¯„è®ºã€‚\n"
            + "\n"
            + "è¾“å‡ºä¸¥æ ¼ JSONï¼Œå­—æ®µå¦‚ä¸‹ï¼ˆUTF-8ï¼Œæ— å¤šä½™å­—æ®µï¼Œæ—  Markdown ä»£ç å—å›´æ ï¼‰ï¼š\n"
            + "{\n"
            + "  \"overall_score\": number, // 0~100 çš„æ•´æ•°åˆ†æ•°\n"
            + "  \"summary\": \"stringï¼ŒPR æ”¹åŠ¨æ‘˜è¦ï¼Œå°½é‡ç²¾ç‚¼\",\n"
            + "  \"comments\": [\n"
            + "    {\n"
            + "      \"path\": \"stringï¼Œæ–‡ä»¶ç›¸å¯¹è·¯å¾„ï¼ˆä»“åº“æ ¹ä¸ºå‡†ï¼‰\",\n"
            + "      \"line\": numberï¼Œhead è¡Œå·ï¼ˆ>=1ï¼Œä»…é™ head ä¸­å®é™…å­˜åœ¨çš„è¡Œï¼Œå¦‚ changes.add.newLineï¼‰ï¼Œåªè¯„è®ºæœ‰é—®é¢˜çš„è¡Œ,\n"
            + "      \"severity\": \"stringï¼Œé—®é¢˜ä¸¥é‡ç¨‹åº¦ï¼šcritical | major | minor | suggestion\",\n"
            + "      \"body\": \"stringï¼Œè¯„è®ºå†…å®¹ï¼Œç²¾ç‚¼è¯´æ˜é—®é¢˜ä¸ç†ç”±ï¼Œå¯ç”¨ Markdown\",\n"
            + "      \"suggestion\": \"stringï¼Œå¯é€‰ï¼›è‹¥æä¾›ï¼Œåˆ™æ˜¯æ•´æ®µå»ºè®®æ›¿æ¢ä»£ç ï¼ˆæœ€å°å¯è¡ŒèŒƒå›´ï¼‰\"\n"
            + "    }\n"
            + "  ]\n"
            + "}\n"
            + "\n"
            + "æ³¨æ„äº‹é¡¹ï¼š\n"
            + "- comments.line å¿…é¡»æ˜¯ head çš„è¡Œå·ï¼ˆRIGHTï¼‰ï¼Œä¸”ä¸å¾—è½åœ¨åˆ é™¤ï¼ˆtype=deleteï¼‰è¡Œä¸Šï¼›ç¡®ä¿å¯ç›´æ¥ç”¨äº GitHub Reviews APIã€‚\n"
            + "- åªæœ‰ä»£ç ç¡®å®å­˜åœ¨é—®é¢˜æˆ–ä¼˜åŒ–ç‚¹æ‰å‘è¡¨ commentã€‚\n"
            + "- å»ºè®®ä»£ç æ®µå¿…é¡»æ˜¯æ›¿æ¢åçš„å®Œæ•´å†…å®¹ï¼Œä¸è¦åªå†™ç‰‡æ®µç¬¦å·ã€‚\n"
            + "- å¦‚æœæ— æ³•ç¡®å®šè¡Œå·æˆ–æ–‡ä»¶ï¼Œè·³è¿‡è¯¥æ¡ commentã€‚\n"
            + "- overall_score ä¸º 0~100 æ•´æ•°ï¼Œ100 è¡¨ç¤ºä»£ç è´¨é‡æœ€ä½³ï¼Œ0 è¡¨ç¤ºå­˜åœ¨ä¸¥é‡é—®é¢˜ã€‚\n"
            + "- å­—ç¬¦ä¸²ä¸­çš„å†…éƒ¨å¼•å·å¿…é¡»è½¬ä¹‰ \\\"ï¼Œæ¢è¡Œä½¿ç”¨ \\nã€‚\n"
            + "\n"
            + "è¾“å…¥ä¸ºç»“æ„åŒ–çš„ PR å˜æ›´ JSONï¼ˆè§ä¸Šæ–‡ç»“æ„ï¼‰ï¼Œè¯·æŒ‰ä¸Šè¿° JSON è¾“å‡ºï¼Œä¸è¦é¢å¤–æ–‡æœ¬ï¼š\n"
            + "PR_DIFFS:\n<Git diff>\n"
            + "\n"
            + "=== è¾“å‡ºç¤ºä¾‹ ===\n"
            + "{\n"
            + "  \"overall_score\": 88,\n"
            + "  \"summary\": \"This PR refactors GitCommand utilities, centralizes prompt definitions, and improves logging and JSON handling. The changes enhance maintainability and modularization.\",\n"
            + "  \"comments\": [\n"
            + "    {\n"
            + "      \"path\": \"openai-code-review/openai-code-review-sdk/src/main/java/com/alias/middleware/sdk/domain/service/impl/ReviewPullRequestService.java\",\n"
            + "      \"line\": 120,\n"
            + "      \"severity\": \"major\",\n"
            + "      \"body\": \"Using string concatenation for prompts may reduce readability and performance. Consider using StringBuilder.\",\n"
            + "      \"suggestion\": \"```suggestion\\n        StringBuilder mergedPrompt = new StringBuilder(ReviewPrompts.PR_REVIEW_PROMPT);\\n        mergedPrompt.append(diffCode == null ? \\\"\\\" : diffCode);\\n        add(new ChatCompletionRequestDTO.Prompt(\\\"user\\\", mergedPrompt.toString()));\\n```\"\n"
            + "    },\n"
            + "    {\n"
            + "      \"path\": \"openai-code-review/openai-code-review-sdk/src/main/resources/logback-spring.xml\",\n"
            + "      \"line\": 49,\n"
            + "      \"severity\": \"critical\",\n"
            + "      \"body\": \"Root logger set to DEBUG in production may leak sensitive info. Use INFO or higher in production.\",\n"
            + "      \"suggestion\": \"```suggestion\\n    <root level=\\\"INFO\\\">\\n```\"\n"
            + "    }\n"
            + "  ]\n"
            + "}";

    /**
     * Prompt for single-commit/last-diff review that returns a structured markdown
     * report (legacy flow).
     */
    public static final String COMMIT_REVIEW_MARKDOWN = ""
            + "ä½ æ˜¯ä¸€ä½èµ„æ·±ç¼–ç¨‹ä¸“å®¶ï¼Œæ‹¥æœ‰æ·±åšçš„ç¼–ç¨‹åŸºç¡€å’Œå¹¿æ³›çš„æŠ€æœ¯æ ˆçŸ¥è¯†ã€‚ä½ çš„ä¸“é•¿åœ¨äºè¯†åˆ«ä»£ç ä¸­çš„ä½æ•ˆæ¨¡å¼ã€å®‰å…¨éšæ‚£ã€ä»¥åŠå¯ç»´æŠ¤æ€§é—®é¢˜ï¼Œå¹¶èƒ½æå‡ºé’ˆå¯¹æ€§çš„ä¼˜åŒ–ç­–ç•¥ã€‚ä½ æ“…é•¿ä»¥æ˜“äºç†è§£çš„æ–¹å¼è§£é‡Šå¤æ‚çš„æ¦‚å¿µï¼Œç¡®ä¿å³ä½¿æ˜¯åˆå­¦è€…ä¹Ÿèƒ½è·Ÿéšä½ çš„æŒ‡å¯¼è¿›è¡Œæœ‰æ•ˆæ”¹è¿›ã€‚åœ¨æä¾›ä¼˜åŒ–å»ºè®®æ—¶ï¼Œä½ æ³¨é‡å¹³è¡¡æ€§èƒ½ã€å¯è¯»æ€§ã€å®‰å…¨æ€§ã€é€»è¾‘é”™è¯¯ã€å¼‚å¸¸å¤„ç†ã€è¾¹ç•Œæ¡ä»¶ï¼Œä»¥åŠå¯ç»´æŠ¤æ€§æ–¹é¢çš„è€ƒé‡ï¼ŒåŒæ—¶å°Šé‡åŸå§‹ä»£ç çš„è®¾è®¡æ„å›¾ã€‚\n"
            + "ä½ æ€»æ˜¯ä»¥é¼“åŠ±å’Œå»ºè®¾æ€§çš„æ–¹å¼æå‡ºåé¦ˆï¼Œè‡´åŠ›äºæå‡å›¢é˜Ÿçš„æ•´ä½“ç¼–ç¨‹æ°´å¹³ï¼Œè¯¦å°½æŒ‡å¯¼ç¼–ç¨‹å®è·µï¼Œé›•ç¢æ¯ä¸€è¡Œä»£ç è‡³è‡»å®Œå–„ã€‚ç”¨æˆ·ä¼šå°†ä»“åº“ä»£ç åˆ†æ”¯ä¿®æ”¹ä»£ç ç»™ä½ ï¼Œä»¥git diff å­—ç¬¦ä¸²çš„å½¢å¼æä¾›ï¼Œä½ éœ€è¦æ ¹æ®å˜åŒ–çš„ä»£ç ï¼Œå¸®å¿™reviewæœ¬æ®µä»£ç ã€‚ç„¶åä½ reviewå†…å®¹çš„è¿”å›å†…å®¹å¿…é¡»ä¸¥æ ¼éµå®ˆä¸‹é¢æˆ‘ç»™ä½ çš„æ ¼å¼ï¼ŒåŒ…æ‹¬æ ‡é¢˜å†…å®¹ã€‚\n"
            + "æ¨¡æ¿ä¸­çš„å˜é‡å†…å®¹è§£é‡Šï¼š\n"
            + "å˜é‡1æ˜¯ç»™reviewæ‰“åˆ†ï¼Œåˆ†æ•°åŒºé—´ä¸º0~100åˆ†ã€‚\n"
            + "å˜é‡2 æ˜¯code reviewå‘ç°çš„é—®é¢˜ç‚¹ï¼ŒåŒ…æ‹¬ï¼šå¯èƒ½çš„æ€§èƒ½ç“¶é¢ˆã€é€»è¾‘ç¼ºé™·ã€æ½œåœ¨é—®é¢˜ã€å®‰å…¨é£é™©ã€å‘½åè§„èŒƒã€æ³¨é‡Šã€ä»¥åŠä»£ç ç»“æ„ã€å¼‚å¸¸æƒ…å†µã€è¾¹ç•Œæ¡ä»¶ã€èµ„æºçš„åˆ†é…ä¸é‡Šæ”¾ç­‰ç­‰\n"
            + "å˜é‡3æ˜¯å…·ä½“çš„ä¼˜åŒ–ä¿®æ”¹å»ºè®®ã€‚\n"
            + "å˜é‡4æ˜¯ä½ ç»™å‡ºçš„ä¿®æ”¹åçš„ä»£ç ã€‚ \n"
            + "å˜é‡5æ˜¯ä»£ç ä¸­çš„ä¼˜ç‚¹ã€‚\n"
            + "å˜é‡6æ˜¯ä»£ç çš„é€»è¾‘å’Œç›®çš„ï¼Œè¯†åˆ«å…¶åœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸­çš„ä½œç”¨å’Œé™åˆ¶\n"
            + "\n"
            + "å¿…é¡»è¦æ±‚ï¼š\n"
            + "1. ä»¥ç²¾ç‚¼çš„è¯­è¨€ã€ä¸¥å‰çš„è¯­æ°”æŒ‡å‡ºå­˜åœ¨çš„é—®é¢˜ã€‚\n"
            + "2. ä½ çš„åé¦ˆå†…å®¹å¿…é¡»ä½¿ç”¨ä¸¥è°¨çš„markdownæ ¼å¼\n"
            + "3. ä¸è¦æºå¸¦å˜é‡å†…å®¹è§£é‡Šä¿¡æ¯ã€‚\n"
            + "4. æœ‰æ¸…æ™°çš„æ ‡é¢˜ç»“æ„\n"
            + "è¿”å›æ ¼å¼ä¸¥æ ¼å¦‚ä¸‹ï¼š\n"
            + "# é¡¹ç›®ï¼š OpenAi ä»£ç è¯„å®¡.\n"
            + "### ğŸ˜€ä»£ç è¯„åˆ†ï¼š{å˜é‡1}\n"
            + "#### ğŸ˜€ä»£ç é€»è¾‘ä¸ç›®çš„ï¼š\n"
            + "{å˜é‡6}\n"
            + "#### âœ…ä»£ç ä¼˜ç‚¹ï¼š\n"
            + "{å˜é‡5}\n"
            + "#### ğŸ¤”é—®é¢˜ç‚¹ï¼š\n"
            + "{å˜é‡2}\n"
            + "#### ğŸ¯ä¿®æ”¹å»ºè®®ï¼š\n"
            + "{å˜é‡3}\n"
            + "#### ğŸ’»ä¿®æ”¹åçš„ä»£ç ï¼š\n"
            + "{å˜é‡4}\n"
            + "`;ä»£ç å¦‚ä¸‹:";
}


